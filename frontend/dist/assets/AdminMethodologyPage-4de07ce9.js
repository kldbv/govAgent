import{r as n,j as e}from"./index-e5c67441.js";function g(){const[m,u]=n.useState([]),[a,t]=n.useState({slug:"how-to-apply",title_ru:"",body_ru:"",published:!0}),[c,r]=n.useState(!1),o="/api",d=async()=>{var s;try{const i=await(await fetch(`${o}/methodology`)).json();u(((s=i==null?void 0:i.data)==null?void 0:s.pages)||[])}catch{}};n.useEffect(()=>{d()},[]);const h=async s=>{s.preventDefault();try{r(!0);const l=localStorage.getItem("token");if(!(await fetch(`${o}/methodology`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify(a)})).ok)throw new Error("save failed");await d(),alert("Сохранено")}catch(l){alert(l.message||"Ошибка сохранения")}finally{r(!1)}};return e.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Методология — админ"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"font-semibold mb-4",children:"Страницы"}),e.jsx("ul",{className:"space-y-2 text-sm",children:m.map(s=>e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsx("span",{children:s.slug}),e.jsx("span",{className:`badge ${s.published?"bg-green-100 text-green-800":"bg-gray-100 text-gray-700"}`,children:s.published?"Опубликовано":"Черновик"})]},s.slug))})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"font-semibold mb-4",children:"Создать/обновить"}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Slug"}),e.jsx("input",{className:"input-field",value:a.slug,onChange:s=>t({...a,slug:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Заголовок (RU)"}),e.jsx("input",{className:"input-field",value:a.title_ru,onChange:s=>t({...a,title_ru:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"HTML (RU)"}),e.jsx("textarea",{className:"input-field h-48",value:a.body_ru,onChange:s=>t({...a,body_ru:s.target.value})})]}),e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:a.published,onChange:s=>t({...a,published:s.target.checked})}),e.jsx("span",{children:"Опубликовано"})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:c,className:"btn-primary",children:c?"Сохранение...":"Сохранить"})})]})]})]})]})}export{g as default};
