import{i as L,r as i,j as e,w as T,y as Y,L as F,h as q,F as Z,C as I,o as R,m as B,G as Q,H as ee,z as _,I as se,T as z,J as ae,K as te,N as le,O as re,Q as ie}from"./index-e5c67441.js";import{F as $,A as ne,X as ce}from"./x-circle-57091fc4.js";import{S as H}from"./search-c5427502.js";import{F as J}from"./filter-0b1c5058.js";import{A as de}from"./AdminApplicationsManagement-c2a2a58b.js";const xe=L("Edit3",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z",key:"18w55b"}]]),oe=L("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),V=L("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),me=L("Plus",[["line",{x1:"12",x2:"12",y1:"5",y2:"19",key:"pwfkuu"}],["line",{x1:"5",x2:"19",y1:"12",y2:"12",key:"13b5wn"}]]),he=L("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function pe(){var h,x;const[l,f]=i.useState(null),[g,v]=i.useState(!0),[S,P]=i.useState("");i.useEffect(()=>{(async()=>{try{v(!0),console.log("Loading admin dashboard stats...");const n=await Z();console.log("Admin dashboard stats response:",n),console.log("Admin dashboard stats data structure:",JSON.stringify(n,null,2)),f(n.data||n)}catch(n){P(n.message||"Failed to load statistics"),console.error("Error loading dashboard stats:",n)}finally{v(!1)}})()},[]);const j=r=>{switch(r){case"approved":return e.jsx(I,{className:"w-5 h-5 text-green-600"});case"rejected":return e.jsx(ce,{className:"w-5 h-5 text-red-600"});case"under_review":return e.jsx(q,{className:"w-5 h-5 text-yellow-600"});default:return e.jsx(ne,{className:"w-5 h-5 text-gray-600"})}},o=r=>{switch(r){case"approved":return"Одобрено";case"rejected":return"Отклонено";case"under_review":return"На рассмотрении";case"draft":return"Черновики";default:return r}};return g?e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"card p-8 text-center",children:[e.jsx("div",{className:"loading-spinner mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Загружаем статистику..."})]})}):S?e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"card p-8 text-center",children:[e.jsx("p",{className:"text-red-600 mb-4",children:S}),e.jsx("button",{onClick:()=>window.location.reload(),className:"btn-primary",children:"Обновить страницу"})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Панель администратора"}),e.jsx("p",{className:"text-gray-600",children:"Обзор системы и управление"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Всего пользователей"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l==null?void 0:l.overview.total_users})]})]}),e.jsxs("div",{className:"mt-4 flex items-center text-sm",children:[e.jsx(Y,{className:"w-4 h-4 text-green-500 mr-1"}),e.jsxs("span",{className:"text-green-600",children:["+",l==null?void 0:l.overview.new_users_30d," за 30 дней"]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(V,{className:"w-8 h-8 text-purple-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Активных программ"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l==null?void 0:l.overview.total_programs})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(F,{to:"/admin/programs",className:"text-sm text-purple-600 hover:text-purple-700",children:"Управление программами →"})})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx($,{className:"w-8 h-8 text-green-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Всего заявок"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l==null?void 0:l.overview.total_applications})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(F,{to:"/admin/applications",className:"text-sm text-green-600 hover:text-green-700",children:"Управление заявками →"})})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{className:"w-8 h-8 text-yellow-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"На рассмотрении"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l==null?void 0:l.overview.active_applications})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(F,{to:"/admin/applications?status=under_review",className:"text-sm text-yellow-600 hover:text-yellow-700",children:"Просмотреть заявки →"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Заявки по статусам"}),e.jsx("div",{className:"space-y-4",children:(h=l==null?void 0:l.applications_by_status)==null?void 0:h.map(r=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[j(r.status),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-900",children:o(r.status)})]}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:r.count})]},r.status))})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Программы по типам"}),e.jsx("div",{className:"space-y-4",children:(x=l==null?void 0:l.programs_by_type)==null?void 0:x.map(r=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500 mr-3"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 capitalize",children:r.type})]}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:r.count})]},r.type))})]})]}),e.jsxs("div",{className:"mt-12",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Быстрые действия"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(F,{to:"/admin/users",className:"card p-4 hover:shadow-lg transition-shadow group",children:[e.jsx(T,{className:"w-6 h-6 text-blue-600 mb-2"}),e.jsx("h4",{className:"font-medium text-gray-900 group-hover:text-blue-600",children:"Управление пользователями"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Просмотр, редактирование ролей пользователей"})]}),e.jsxs(F,{to:"/admin/programs/new",className:"card p-4 hover:shadow-lg transition-shadow group",children:[e.jsx(V,{className:"w-6 h-6 text-purple-600 mb-2"}),e.jsx("h4",{className:"font-medium text-gray-900 group-hover:text-purple-600",children:"Создать программу"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Добавить новую программу поддержки"})]}),e.jsxs(F,{to:"/admin/applications?status=under_review",className:"card p-4 hover:shadow-lg transition-shadow group",children:[e.jsx($,{className:"w-6 h-6 text-green-600 mb-2"}),e.jsx("h4",{className:"font-medium text-gray-900 group-hover:text-green-600",children:"Обработка заявок"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Рассмотреть поступившие заявки"})]})]})]})]})}function ue(){const[l,f]=i.useState([]),[g,v]=i.useState(!0),[S,P]=i.useState(""),[j,o]=i.useState(""),[h,x]=i.useState(""),[r,n]=i.useState(1),[m,y]=i.useState(null),[C,M]=i.useState(null),b=async(a=1,c=j,d=h)=>{try{v(!0);const k={page:a,limit:20};c.trim()&&(k.search=c.trim()),d&&(k.role=d);const E=await Q(k);if(E&&E.data)f(E.data.users||[]),y(E.data.pagination||null);else throw new Error("Invalid response format")}catch(k){P(k.message||"Failed to load users"),console.error("Error loading users:",k)}finally{v(!1)}};i.useEffect(()=>{b(1,j,h),n(1)},[j,h]);const p=a=>{a.preventDefault(),b(1,j,h),n(1)},D=async(a,c)=>{try{M({userId:a,newRole:c}),await ee(a,c),f(l.map(d=>d.id===a?{...d,role:c}:d)),_.success("Роль пользователя обновлена!")}catch(d){_.error(d.message||"Failed to update user role"),console.error("Error updating user role:",d)}finally{M(null)}},N=a=>{n(a),b(a,j,h)},w=a=>{switch(a){case"admin":return"bg-red-100 text-red-800";case"manager":return"bg-blue-100 text-blue-800";case"user":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return g&&l.length===0?e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"card p-8 text-center",children:[e.jsx("div",{className:"loading-spinner mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Загружаем пользователей..."})]})}):S?e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"card p-8 text-center",children:[e.jsx("p",{className:"text-red-600 mb-4",children:S}),e.jsx("button",{onClick:()=>b(),className:"btn-primary",children:"Попробовать снова"})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Управление пользователями"}),e.jsx("p",{className:"text-gray-600",children:"Просмотр и редактирование ролей пользователей системы"})]}),e.jsx("div",{className:"card p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("form",{onSubmit:p,className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Поиск по имени или email...",value:j,onChange:a=>o(a.target.value),className:"input-field pl-10 w-full"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(J,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsxs("select",{value:h,onChange:a=>x(a.target.value),className:"input-field pl-10 pr-8",children:[e.jsx("option",{value:"",children:"Все роли"}),e.jsx("option",{value:"admin",children:"Администраторы"}),e.jsx("option",{value:"manager",children:"Менеджеры"}),e.jsx("option",{value:"user",children:"Пользователи"})]})]}),e.jsx("button",{onClick:()=>b(r,j,h),className:"btn-primary",disabled:g,children:g?"Загрузка...":"Поиск"})]})]})}),e.jsxs("div",{className:"card overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5 text-gray-500"}),e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Пользователи",m&&` (${m.total})`]})]})})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Пользователь"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Роль"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Бизнес"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Дата регистрации"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Действия"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.full_name}),e.jsx("div",{className:"text-sm text-gray-500",children:a.email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("select",{value:a.role,onChange:c=>D(a.id,c.target.value),disabled:(C==null?void 0:C.userId)===a.id,className:`text-xs font-medium px-2 py-1 rounded-full border-0 ${w(a.role)} ${(C==null?void 0:C.userId)===a.id?"opacity-50 cursor-not-allowed":"cursor-pointer hover:shadow-md"}`,children:[e.jsx("option",{value:"user",children:"Пользователь"}),e.jsx("option",{value:"manager",children:"Менеджер"}),e.jsx("option",{value:"admin",children:"Администратор"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.business_type?e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:a.business_type}),a.industry&&e.jsx("div",{className:"text-xs text-gray-500",children:a.industry})]}):e.jsx("span",{className:"text-gray-400",children:"Не указано"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(a.created_at).toLocaleDateString("ru-RU")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:e.jsx(oe,{className:"w-5 h-5"})})})]},a.id))})]})}),l.length===0&&!g&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(T,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Пользователи не найдены"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:j||h?"Попробуйте изменить критерии поиска":"В системе пока нет пользователей"})]}),m&&m.total_pages>1&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Показано ",(r-1)*m.per_page+1," - ",Math.min(r*m.per_page,m.total)," из ",m.total," пользователей"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>N(r-1),disabled:r===1||g,className:"btn-secondary p-2 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(R,{className:"w-4 h-4"})}),e.jsxs("span",{className:"px-3 py-1 text-sm bg-blue-100 text-blue-800 rounded",children:[r," / ",m.total_pages]}),e.jsx("button",{onClick:()=>N(r+1),disabled:r===m.total_pages||g,className:"btn-secondary p-2 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(B,{className:"w-4 h-4"})})]})]})})]})]})}function ge(){const l=se(),[f,g]=i.useState([]),[v,S]=i.useState(!0),[P,j]=i.useState(""),[o,h]=i.useState(""),[x,r]=i.useState(""),[n,m]=i.useState(1),[y,C]=i.useState(null),[M,b]=i.useState(l.pathname.includes("/new")),[p,D]=i.useState(null),[N,w]=i.useState({}),[a,c]=i.useState({name:"",description:"",eligibility_criteria:"",funding_amount:"",application_deadline:""}),d=async(s=1,t=o,u=x)=>{try{S(!0);const A={page:s,limit:20};t.trim()&&(A.search=t.trim()),u&&(A.status=u);const U=await ae(A);if(U&&U.data)g(U.data.programs||[]),C(U.data.pagination||null);else throw new Error("Invalid response format")}catch(A){j(A.message||"Failed to load programs"),console.error("Error loading programs:",A)}finally{S(!1)}};i.useEffect(()=>{d(1,o,x),m(1)},[o,x]);const k=()=>{c({name:"",description:"",eligibility_criteria:"",funding_amount:"",application_deadline:""}),D(null),b(!1)},E=async s=>{s.preventDefault();try{w(t=>({...t,create:!0})),await te(a),_.success("Программа создана!"),k(),d(n,o,x)}catch(t){_.error(t.message||"Failed to create program"),console.error("Error creating program:",t)}finally{w(t=>({...t,create:!1}))}},O=async s=>{if(s.preventDefault(),!!p)try{w(t=>({...t,[p.id]:!0})),await le(p.id,a),_.success("Программа обновлена!"),k(),d(n,o,x)}catch(t){_.error(t.message||"Failed to update program"),console.error("Error updating program:",t)}finally{w(t=>({...t,[p.id]:!1}))}},X=async(s,t)=>{try{w(u=>({...u,[s]:!0})),await re(s,t),g(f.map(u=>u.id===s?{...u,status:t}:u)),_.success("Статус программы обновлен!")}catch(u){_.error(u.message||"Failed to update program status"),console.error("Error updating program status:",u)}finally{w(u=>({...u,[s]:!1}))}},G=async s=>{if(confirm("Вы уверены, что хотите удалить эту программу?"))try{w(t=>({...t,[s]:!0})),await ie(s),g(f.filter(t=>t.id!==s)),_.success("Программа удалена!")}catch(t){_.error(t.message||"Failed to delete program"),console.error("Error deleting program:",t)}finally{w(t=>({...t,[s]:!1}))}},K=s=>{D(s),c({name:s.name,description:s.description,eligibility_criteria:s.eligibility_criteria,funding_amount:s.funding_amount,application_deadline:s.application_deadline}),b(!0)},W=s=>{switch(s){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"draft":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return v&&f.length===0?e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"card p-8 text-center",children:[e.jsx("div",{className:"loading-spinner mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Загружаем программы..."})]})}):P?e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"card p-8 text-center",children:[e.jsx("p",{className:"text-red-600 mb-4",children:P}),e.jsx("button",{onClick:()=>d(),className:"btn-primary",children:"Попробовать снова"})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Управление программами"}),e.jsx("p",{className:"text-gray-600",children:"Создание и редактирование программ поддержки бизнеса"})]}),e.jsxs("button",{onClick:()=>b(!0),className:"btn-primary flex items-center gap-2",children:[e.jsx(me,{className:"w-5 h-5"}),"Создать программу"]})]})}),M&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:p?"Редактировать программу":"Создать новую программу"})}),e.jsxs("form",{onSubmit:p?O:E,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Название программы"}),e.jsx("input",{type:"text",required:!0,value:a.name,onChange:s=>c({...a,name:s.target.value}),className:"input-field w-full",placeholder:"Введите название программы"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Описание"}),e.jsx("textarea",{required:!0,rows:4,value:a.description,onChange:s=>c({...a,description:s.target.value}),className:"input-field w-full",placeholder:"Опишите программу поддержки"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Критерии участия"}),e.jsx("textarea",{required:!0,rows:3,value:a.eligibility_criteria,onChange:s=>c({...a,eligibility_criteria:s.target.value}),className:"input-field w-full",placeholder:"Укажите критерии для участия в программе"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Размер финансирования"}),e.jsx("input",{type:"text",required:!0,value:a.funding_amount,onChange:s=>c({...a,funding_amount:s.target.value}),className:"input-field w-full",placeholder:"Например: до 2 000 000 тенге"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Дедлайн подачи заявок"}),e.jsx("input",{type:"date",required:!0,value:a.application_deadline,onChange:s=>c({...a,application_deadline:s.target.value}),className:"input-field w-full"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:k,className:"btn-secondary",children:"Отмена"}),e.jsx("button",{type:"submit",disabled:N.create||p&&N[p.id]||!1,className:"btn-primary",children:N.create||p&&N[p.id]?"Сохранение...":p?"Обновить программу":"Создать программу"})]})]})]})}),e.jsx("div",{className:"card p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(H,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Поиск программ...",value:o,onChange:s=>h(s.target.value),className:"input-field pl-10 w-full"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(J,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsxs("select",{value:x,onChange:s=>r(s.target.value),className:"input-field pl-10 pr-8",children:[e.jsx("option",{value:"",children:"Все статусы"}),e.jsx("option",{value:"active",children:"Активные"}),e.jsx("option",{value:"inactive",children:"Неактивные"}),e.jsx("option",{value:"draft",children:"Черновики"})]})]})})]})}),e.jsxs("div",{className:"card overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-5 h-5 text-gray-500"}),e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Программы поддержки",y&&` (${y.total})`]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Программа"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Статус"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Финансирование"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Дедлайн"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Действия"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsx("div",{className:"text-sm text-gray-500 max-w-md truncate",children:s.description})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("select",{value:s.status,onChange:t=>X(s.id,t.target.value),disabled:N[s.id],className:`text-xs font-medium px-2 py-1 rounded-full border-0 ${W(s.status)} ${N[s.id]?"opacity-50 cursor-not-allowed":"cursor-pointer hover:shadow-md"}`,children:[e.jsx("option",{value:"draft",children:"Черновик"}),e.jsx("option",{value:"active",children:"Активна"}),e.jsx("option",{value:"inactive",children:"Неактивна"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.funding_amount}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(s.application_deadline).toLocaleDateString("ru-RU")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>K(s),disabled:N[s.id],className:"text-blue-600 hover:text-blue-900 disabled:opacity-50",title:"Редактировать",children:e.jsx(xe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>G(s.id),disabled:N[s.id],className:"text-red-600 hover:text-red-900 disabled:opacity-50",title:"Удалить",children:e.jsx(he,{className:"w-4 h-4"})})]})})]},s.id))})]})}),f.length===0&&!v&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(z,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Программы не найдены"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:o||x?"Попробуйте изменить критерии поиска":"Создайте первую программу поддержки"}),!o&&!x&&e.jsx("button",{onClick:()=>b(!0),className:"btn-primary mt-4",children:"Создать программу"})]}),y&&y.total_pages>1&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Показано ",(n-1)*y.per_page+1," - ",Math.min(n*y.per_page,y.total)," из ",y.total," программ"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{const s=n-1;m(s),d(s,o,x)},disabled:n===1||v,className:"btn-secondary p-2 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(R,{className:"w-4 h-4"})}),e.jsxs("span",{className:"px-3 py-1 text-sm bg-blue-100 text-blue-800 rounded",children:[n," / ",y.total_pages]}),e.jsx("button",{onClick:()=>{const s=n+1;m(s),d(s,o,x)},disabled:n===y.total_pages||v,className:"btn-secondary p-2 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(B,{className:"w-4 h-4"})})]})]})})]})]})}function be(){return e.jsx(pe,{})}function we(){return e.jsx(ue,{})}function ke(){return e.jsx(ge,{})}function _e(){return e.jsx(de,{})}export{_e as AdminApplicationsPage,be as AdminDashboardPage,ke as AdminProgramsPage,we as AdminUsersPage};
