import{i as _,v as T,r as c,j as e,k as U,h as N,T as A,w as L,d as f,M as y,S as B,x as F,C as X}from"./index-e5c67441.js";import{A as D,F as v,X as M}from"./x-circle-57091fc4.js";const R=_("PauseCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]),O=_("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]),K=()=>{const{programId:m}=T(),[t,w]=c.useState(null),[x,h]=c.useState([]),[S,u]=c.useState(!0),[g,k]=c.useState(""),[z,C]=c.useState(null),[P,b]=c.useState(null);c.useEffect(()=>{m&&p()},[m]);const p=async()=>{try{u(!0);const s=localStorage.getItem("token"),a=await fetch(`${{}.NEXT_PUBLIC_API_URL}/api/programs/${m}/instructions`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error("Failed to fetch instructions");const r=await a.json();w(r.data.instructions),h(r.data.progress||[])}catch(s){console.error("Error fetching instructions:",s),k("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}finally{u(!1)}},o=async(s,a,r)=>{try{b(s);const n=localStorage.getItem("token");if(!(await fetch(`${{}.NEXT_PUBLIC_API_URL}/api/programs/${m}/instructions/step-status`,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({step_number:s,status:a,notes:r})})).ok)throw new Error("Failed to update step status");h(l=>l.find(d=>d.step_number===s)?l.map(d=>d.step_number===s?{...d,status:a,notes:r,updated_at:new Date}:d):[...l,{step_number:s,status:a,notes:r,updated_at:new Date}])}catch(n){console.error("Error updating step status:",n),alert("–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å —à–∞–≥–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}finally{b(null)}},E=s=>{const a=x.find(r=>r.step_number===s);return(a==null?void 0:a.status)||"pending"},I=s=>{switch(s){case"completed":return e.jsx(X,{className:"text-green-500",size:20});case"in_progress":return e.jsx(O,{className:"text-blue-500",size:20});case"blocked":return e.jsx(M,{className:"text-red-500",size:20});default:return e.jsx(R,{className:"text-gray-400",size:20})}},q=s=>{switch(s){case"completed":return"bg-green-50 border-green-200";case"in_progress":return"bg-blue-50 border-blue-200";case"blocked":return"bg-red-50 border-red-200";default:return"bg-gray-50 border-gray-200"}},$=()=>{if(!t)return 0;const s=t.steps.length,a=x.filter(r=>r.status==="completed").length;return Math.round(a/s*100)};if(S)return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-8 w-3/4"}),[1,2,3].map(s=>e.jsxs("div",{className:"bg-white rounded-lg p-6 mb-6",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]},s))]})})});if(g)return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[e.jsx(D,{className:"mx-auto mb-4 text-red-500",size:48}),e.jsx("p",{className:"text-red-700",children:g}),e.jsx("button",{onClick:p,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700",children:"–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –µ—â–µ —Ä–∞–∑"})]})})});if(!t)return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(v,{className:"mx-auto mb-4 text-gray-400",size:48}),e.jsx("p",{className:"text-gray-600",children:"–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"})]})})});const j=$();return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø–æ–¥–∞—á–µ –∑–∞—è–≤–∫–∏"}),e.jsx("h2",{className:"text-lg text-blue-600 mb-1",children:t.program_title}),e.jsx("p",{className:"text-gray-600",children:t.organization})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:[j,"%"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"–≤—ã–ø–æ–ª–Ω–µ–Ω–æ"})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${j}%`}})}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(U,{className:"mr-2",size:16}),e.jsxs("span",{children:["–ö—Ä–∞–π–Ω–∏–π —Å—Ä–æ–∫: ",t.application_deadline]})]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(N,{className:"mr-2",size:16}),e.jsxs("span",{children:["–í—Ä–µ–º—è: ",t.total_estimated_time]})]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(A,{className:"mr-2",size:16}),e.jsxs("span",{children:["–≠—Ç–∞–ø–æ–≤: ",t.steps.length]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"–û–±–∑–æ—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞"}),e.jsx("p",{className:"text-gray-700 mb-4",children:t.overview}),t.prerequisites.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —É—Å–ª–æ–≤–∏—è:"}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-gray-700",children:t.prerequisites.map((s,a)=>e.jsx("li",{children:s},a))})]})]}),e.jsx("div",{className:"space-y-4 mb-6",children:t.steps.map(s=>{const a=E(s.step_number),r=z===s.step_number,n=P===s.step_number;return e.jsx("div",{className:`bg-white rounded-lg shadow-sm border-2 ${q(a)}`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:I(a)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsxs("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded mr-2",children:["–®–∞–≥ ",s.step_number]}),e.jsx("span",{className:"text-sm text-gray-500",children:s.estimated_duration})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:s.title}),e.jsx("p",{className:"text-gray-700",children:s.description})]})]}),e.jsx("div",{className:"flex items-center space-x-2 ml-4",children:e.jsx("button",{onClick:()=>C(r?null:s.step_number),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:r?"–°–≤–µ—Ä–Ω—É—Ç—å":"–ü–æ–¥—Ä–æ–±–Ω–µ–µ"})})]}),e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx("button",{onClick:()=>o(s.step_number,"in_progress"),disabled:n||a==="in_progress",className:`text-xs px-3 py-1 rounded-full transition-colors ${a==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 hover:bg-blue-50 text-gray-700 hover:text-blue-700"}`,children:"–ù–∞—á–∞—Ç—å"}),e.jsx("button",{onClick:()=>o(s.step_number,"completed"),disabled:n||a==="completed",className:`text-xs px-3 py-1 rounded-full transition-colors ${a==="completed"?"bg-green-100 text-green-800":"bg-gray-100 hover:bg-green-50 text-gray-700 hover:text-green-700"}`,children:"–ó–∞–≤–µ—Ä—à–∏—Ç—å"}),a!=="pending"&&e.jsx("button",{onClick:()=>o(s.step_number,"pending"),disabled:n,className:"text-xs px-3 py-1 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700",children:"–°–±—Ä–æ—Å–∏—Ç—å"})]}),r&&e.jsxs("div",{className:"border-t pt-4 space-y-4",children:[s.required_documents.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center",children:[e.jsx(v,{className:"mr-2",size:16}),"–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:"]}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-gray-700",children:s.required_documents.map((i,l)=>e.jsx("li",{children:i},l))})]}),s.instructions.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"–ü–æ—à–∞–≥–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:"}),e.jsx("ol",{className:"list-decimal list-inside space-y-1 text-gray-700",children:s.instructions.map((i,l)=>e.jsx("li",{children:i},l))})]}),s.tips.length>0&&e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2 text-blue-800",children:"üí° –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã:"}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-blue-700 text-sm",children:s.tips.map((i,l)=>e.jsx("li",{children:i},l))})]}),s.common_errors.length>0&&e.jsxs("div",{className:"bg-red-50 p-3 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2 text-red-800",children:"‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏:"}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-red-700 text-sm",children:s.common_errors.map((i,l)=>e.jsx("li",{children:i},l))})]}),s.responsible_contact&&e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"–ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤:"}),e.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[s.responsible_contact.name&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(L,{className:"mr-2",size:14}),s.responsible_contact.name,s.responsible_contact.department&&e.jsxs("span",{className:"text-gray-500 ml-1",children:["(",s.responsible_contact.department,")"]})]}),s.responsible_contact.phone&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(f,{className:"mr-2",size:14}),s.responsible_contact.phone]}),s.responsible_contact.email&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(y,{className:"mr-2",size:14}),s.responsible_contact.email]})]})]})]})]})},s.step_number)})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(B,{className:"mr-2",size:20}),"–ü–æ–¥–∞—á–∞ –∑–∞—è–≤–∫–∏"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"–°–ø–æ—Å–æ–± –ø–æ–¥–∞—á–∏:"})," ",t.final_submission.method]}),t.final_submission.submission_portal&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"–ü–æ—Ä—Ç–∞–ª:"})," ",t.final_submission.submission_portal]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"–§–æ—Ä–º–∞—Ç:"}),e.jsx("ul",{className:"list-disc list-inside mt-1 ml-4",children:t.final_submission.required_format.map((s,a)=>e.jsx("li",{children:s},a))})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(N,{className:"mr-2",size:20}),"–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"–í—Ä–µ–º—è —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è:"})," ",t.follow_up.review_time]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:"})," ",t.follow_up.notification_method]}),t.follow_up.contact_for_questions.phone&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(f,{className:"mr-2",size:14}),t.follow_up.contact_for_questions.phone]}),t.follow_up.contact_for_questions.email&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(y,{className:"mr-2",size:14}),t.follow_up.contact_for_questions.email]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(F,{className:"mr-2",size:20}),"–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:t.success_metrics.approval_rate}),e.jsx("div",{className:"text-gray-600",children:"–ü—Ä–æ—Ü–µ–Ω—Ç –æ–¥–æ–±—Ä–µ–Ω–∏—è"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:t.success_metrics.average_funding_amount}),e.jsx("div",{className:"text-gray-600",children:"–°—Ä–µ–¥–Ω—è—è —Å—É–º–º–∞"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:t.success_metrics.typical_processing_time}),e.jsx("div",{className:"text-gray-600",children:"–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏"})]})]})]})]})})};export{K as default};
