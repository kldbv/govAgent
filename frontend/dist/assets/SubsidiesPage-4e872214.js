import{r as t,j as e,c as f,s as b}from"./index-e5c67441.js";function S(){const[r,i]=t.useState([]),[c,d]=t.useState(!0),[x,p]=t.useState(""),[h,o]=t.useState(1),[j,u]=t.useState(!1),m=12,[l,N]=t.useState(!1),g=async(s=1)=>{try{d(!0);const a=await b({program_type:"субсидии",limit:m,page:s,sort:"newest",open_only:l?1:0}),n=a.programs||a||[];i(y=>s===1?n:[...y,...n]),u(n.length===m),o(s)}catch(a){p(a.message||"Не удалось загрузить субсидии")}finally{d(!1)}};return t.useEffect(()=>{g(1)},[l]),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Субсидии"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Программы субсидирования и компенсации затрат"})]}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Найдено: ",r.length]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:l,onChange:s=>{i([]),o(1),N(s.target.checked)}}),e.jsx("span",{children:"Только открытые"})]})]}),c?e.jsxs("div",{className:"card p-8 text-center",children:[e.jsx("div",{className:"loading-spinner mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Загрузка субсидий..."})]}):x?e.jsx("div",{className:"card p-8 text-center",children:e.jsx("p",{className:"text-red-600",children:x})}):r.length===0?e.jsx("div",{className:"card p-8 text-center",children:e.jsx("p",{className:"text-gray-600",children:"Пока нет программ субсидирования"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:r.map(s=>e.jsx(f,{program:s},s.id))}),j&&e.jsx("div",{className:"text-center mt-8",children:e.jsx("button",{className:"btn-secondary",disabled:c,onClick:()=>g(h+1),children:c?"Загрузка...":"Загрузить еще"})})]})]})}export{S as default};
